(function(){var ArrayUtil,Blend,CSSUtil,ColorMatrix,ColorMatrixFilter,DOM,Easing,Event,EventDispatcher,EventPhase,HTTP,JSON,MathUtil,Matrix,ObjectUtil,Point,QueryString,StringUtil,Transition,Tween,exports,_IDENTITY,_LUMA_B,_LUMA_B2,_LUMA_G,_LUMA_G2,_LUMA_R,_LUMA_R2,_ONETHIRD,_RAD,_cos,_max,_min,_mix,_peg,_sin,_tan,__slice=Array.prototype.slice,__hasProp=Object.prototype.hasOwnProperty;typeof window.muon=="undefined"&&(window.muon={}),typeof window.muon.dom=="undefined"&&(window.muon.dom={}),typeof window.muon.css3=="undefined"&&(window.muon.css3={}),typeof window.muon.events=="undefined"&&(window.muon.events={}),typeof window.muon.filters=="undefined"&&(window.muon.filters={}),typeof window.muon.geom=="undefined"&&(window.muon.geom={}),typeof window.muon.net=="undefined"&&(window.muon.net={}),typeof window.muon.serializer=="undefined"&&(window.muon.serializer={}),typeof window.muon.utils=="undefined"&&(window.muon.utils={}),exports=window.muon,exports.css3.Easing=Easing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},Transition=function(){function a(){this._storage={}}return a.prototype.add=function(a,b,c){return this._storage[a]={time:b,easing:c}},a.prototype.remove=function(a){return delete this._storage[a]},a.prototype.toString=function(){var a,b,c,d;b=[],d=this._storage;for(a in d)c=d[a],b.push(""+a+" "+c.time/1e3+"s "+c.easing);return b.join(", ")},a}(),exports.css3.Tween=Tween={_transitions:{},_computedStyles:{},to:function(a,b,c,d,e){var f=this;return d==null&&(d=Easing.ease),setTimeout(function(){var g,h,i,j,k,l,m,n;k={},h=0,g=window.getComputedStyle(a),(l=f._transitions[a])||(l=f._transitions[a]=new Transition);for(j in b)m=b[j],g[j]!==String(m)&&(k[j]=m,l.add(j,c,d),h++);h===0&&setTimeout(function(){return typeof e=="function"?e():void 0},0);if(h!==0){i=function(b){return a=b.target,l=f._transitions[a],l.remove(b.propertyName),a.removeEventListener("webkitTransitionEnd",i),a.style["-webkit-transition"]=l.toString(),typeof e=="function"?e():void 0},a.addEventListener("webkitTransitionEnd",i),a.style["-webkit-transition"]=l.toString(),n=[];for(j in k)m=k[j],n.push(a.style[j]=m);return n}},0)}},exports.dom.DOM=DOM={create:function(a,b,c){var d,e,f;d=document.createElement(a);for(e in b)f=b[e],e==="value"&&(f=StringUtil.escape(f)),d.setAttribute(e,f);return c!=null&&this.setText(d,c),d},getComputedStyle:function(a){return a.currentStyle||document.defaultView.getComputedStyle(a,"")},setText:function(a,b){return typeof a=="string"&&(a=document.createElement(a)),a!=null&&(a.innerHTML=StringUtil.escape(b)),a},getFormData:function(a){var b,c,d,e,f,g;b={},g=a.elements;for(e=0,f=g.length;e<f;e++)c=g[e],c.name&&c.name!==""&&(ArrayUtil.isArray(b[c.name])?b[c.name].push(c.value):b[c.name]!=null?(d=b[c.name],b[c.name]=[c.value]):b[c.name]=c.value);return b},clearForm:function(a){var b,c,d,e,f,g,h,i;c=!0,h=a.elements,i=[];for(f=0,g=h.length;f<g;f++)b=h[f],(d=b.nodeName)==="TEXTAREA"||d==="INPUT"&&((e=b.getAttribute("type"))==="text"||e==="password")?(b.value="",c?(c=!1,i.push(b.focus())):i.push(void 0)):i.push(void 0);return i},prependChild:function(a,b){return b.insertBefore(a,b.firstChild)},insertBefore:function(a,b){return b.parentNode.insertBefore(a,b.nextSibling),a},remove:function(a){var b;return a!=null?(b=a.parentNode)!=null?b.removeChild(a):void 0:void 0},replaceWithInput:function(a){return a.addEventListener("click",function(b){var c,d;return a=b.target,a.style.display="none",d=a.innerHTML,c=document.createElement("input"),c.setAttribute("size",d.length),c.setAttribute("type","text"),c.className="copy",c.value=d,DOM.insertBefore(c,a),function(a,b){return setTimeout(function(){return a.focus(),a.select()},0),a.addEventListener("focusout",function(c){return DOM.remove(a),b.style.display="inline"})}(c,a)})},getRect:function(a){var b,c,d,e,f;c=0,d=0,b=a;while(b)c+=b.offsetLeft||0,d+=b.offsetTop||0,b=b.offsetParent;e=0,f=0,b=a;while(b)e+=b.scrollLeft||0,f+=b.scrollTop||0,b=b.parentNode;return{x:c-e,y:d-f,width:a.offsetWidth,height:a.offsetHeight}},listen:function(){return typeof window.addEventListener=="function"?function(a,b,c){return a.addEventListener(b,c,!1)}:function(a,b,c){return a.attachEvent("on"+b,function(a){return a.stopPropagation=function(){return this.cancelBubble=!0},a.preventDefault=function(){return this.returnValue=!1},c(a)})}}()},exports.events.Event=Event=function(){function a(b,c,d){var e;c==null&&(c=!1),d==null&&(d=!1);if(!(this instanceof a))return new a(b,c,d);b instanceof a&&(e=b,b=e.type,c=e.bubbles,d=e.cancelable,this.currentTarget=e.currentTarget,this.target=e.target),this.type=b,this.bubbles=c,this.cancelable=d,this._isPropagationStopped=!1,this._isPropagationStoppedImmediately=!1,this._isDefaultPrevented=!1}return a.COMPLETE="complete",a.prototype.formatToString=function(){var a,b;return b=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[],""},a.prototype.stopPropagation=function(){this._isPropagationStopped=!0},a.prototype.stopImmediatePropagation=function(){this._isPropagationStopped=!0,this._isPropagationStoppedImmediately=!0},a.prototype.isDefaultPrevented=function(){return this._isDefaultPrevented},a.prototype.preventDefault=function(){this._isDefaultPrevented=!0},a}(),exports.events.EventDispatcher=EventDispatcher=function(){function a(){this._events={}}return a.prototype.addEventListener=function(a,b,c,d){c==null&&(c=!1),d==null&&(d=0);if(typeof a!="string")throw new TypeError("EventDispatcher#addEventListener: type isn't string");if(typeof b!="function")throw new TypeError("EventDispatcher#addEventListener: listener isn't function");return this._events[a]==null&&(this._events[a]=[]),this._events[a].push({listener:b,useCapture:c,priority:d}),this._events[a].sort(this._sortOnPriorityInDescendingOrder),this},a.prototype.on=a.prototype.addEventListener,a.prototype._sortOnPriorityInDescendingOrder=function(a,b){return b.priority-a.priority},a.prototype.removeEventListener=function(a,b){var c,d;if(d=this._events[a]){c=d.length;while(c--)d[c].listener===b&&d.splice(c,1);d.length===0&&delete this._events[a]}return this},a.prototype.off=a.prototype.removeEventListener,a.prototype.dispatchEvent=function(a){var b,c,d,e;if(a instanceof Event){a.currentTarget=this;if((c=this._events[a.type])!=null)for(d=0,e=c.length;d<e;d++){b=c[d];if(b.useCapture&&a.eventPhase===EventPhase.CAPTURING_PHASE||b.useCapture===!1&&a.eventPhase!==EventPhase.CAPTURING_PHASE){(function(a,b){return setTimeout(function(){return a.listener(b)},0)})(b,a);if(a._isPropagationStoppedImmediately)break}}return!a._isDefaultPrevented}throw new TypeError("EventDispatcher#dispatchEvent: event isn't Event")},a.prototype.emit=a.prototype.dispatchEvent,a}(),exports.events.EventPhase=EventPhase={CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3},_mix=function(a,b,c){return a+((b-a)*c>>8)},_peg=function(a){return a<0?0:a>255?255:a},_min=Math.min,_max=Math.max,exports.filters.Blend=Blend={scan:function(a,b,c){var d,e,f,g,h,i;c=this[c];if(c==null)throw new TypeError(""+c+" isn't defined.");d=a.data,g=b.data;for(e=0,h=d.length;e<h;e+=4)f=c(d[e],d[e+1],d[e+2],d[e+3],g[e],g[e+1],g[e+2],g[e+3]),[].splice.apply(d,[e,e+3-e+1].concat(i=f.slice(0,4))),i;return a},blend:function(a,b,c,d,e,f,g,h){return[_mix(a,e,h),_mix(b,f,h),_mix(c,g,h),d+h]},add:function(a,b,c,d,e,f,g,h){return[a+(e*h>>8),b+(f*h>>8),c+(g*h>>8),d+h]},subtract:function(a,b,c,d,e,f,g,h){return[a-(e*h>>8),b-(f*h>>8),c-(g*h>>8),d+h]},darkest:function(a,b,c,d,e,f,g,h){return[_mix(a,_min(a,e*h>>8),h),_mix(b,_min(b,f*h>>8),h),_mix(c,_min(c,g*h>>8),h),d+h]},lightest:function(a,b,c,d,e,f,g,h){return[_max(a,e*h>>8),_max(b,f*h>>8),_max(c,g*h>>8),d+h]},difference:function(a,b,c,d,e,f,g,h){return[_mix(a,a>e?a-e:e-a,h),_mix(b,b>f?b-f:f-b,h),_mix(c,c>g?c-g:g-c,h),d+h]},exclusion:function(a,b,c,d,e,f,g,h){return[_mix(a,a+e-(a*e>>7),h),_mix(b,b+f-(b*f>>7),h),_mix(c,c+g-(c*g>>7),h),d+h]},reflex:function(a,b,c,d,e,f,g,h){return[_mix(a,e===255?e:a*a/(255-e),h),_mix(b,f===255?f:b*b/(255-f),h),_mix(c,g===255?g:c*c/(255-g),h),d+h]},multiply:function(a,b,c,d,e,f,g,h){return[_mix(a,a*e>>8,h),_mix(b,b*f>>8,h),_mix(c,c*g>>8,h),d+h]},screen:function(a,b,c,d,e,f,g,h){return[_mix(a,255-((255-a)*(255-e)>>8),h),_mix(b,255-((255-b)*(255-f)>>8),h),_mix(c,255-((255-c)*(255-g)>>8),h),d+h]},overlay:function(a,b,c,d,e,f,g,h){return[_mix(a,a<128?a*e>>7:255-((255-a)*(255-e)>>7),h),_mix(b,b<128?b*f>>7:255-((255-b)*(255-f)>>7),h),_mix(c,c<128?c*g>>7:255-((255-c)*(255-g)>>7),h),d+h]},softLight:function(a,b,c,d,e,f,g,h){return[_mix(a,(a*e>>7)+(a*a>>8)-(a*a*e>>15),h),_mix(b,(b*f>>7)+(b*b>>8)-(b*b*f>>15),h),_mix(c,(c*g>>7)+(c*c>>8)-(c*c*g>>15),h),d+h]},hardLight:function(a,b,c,d,e,f,g,h){return[_mix(a,e<128?a*e>>7:255-((255-a)*(255-e)>>7),h),_mix(b,f<128?b*f>>7:255-((255-b)*(255-f)>>7),h),_mix(c,g<128?c*g>>7:255-((255-c)*(255-g)>>7),h),d+h]},vividLight:function(a,b,c,d,e,f,g,h){return[e===0?0:e===255?255:e<128?255-_peg((255-a<<8)/(e*2)):_peg((a<<8)/((255-e)*2)),f===0?0:f===255?255:f<128?255-_peg((255-b<<8)/(f*2)):_peg((b<<8)/((255-f)*2)),g===0?0:g===255?255:g<128?255-_peg((255-c<<8)/(g*2)):_peg((c<<8)/((255-g)*2)),d+h]},linearLight:function(a,b,c,d,e,f,g,h){return[e<128?_max(e*2+a-255,0):_min(e+a,255),f<128?_max(f*2+b-255,0):_min(f+b,255),g<128?_max(g*2+c-255,0):_min(g+c,255),d+h]},pinLight:function(a,b,c,d,e,f,g,h){return[e<128?_min(e*2,a):_max((e-128)*2,a),f<128?_min(f*2,b):_max((f-128)*2,b),g<128?_min(g*2,c):_max((g-128)*2,c),d+h]},hardMix:function(a,b,c,d,e,f,g,h){var i,j,k;return k=e===0?0:e===255?255:e<128?255-_peg((255-a<<8)/(e*2)):_peg((a<<8)/((255-e)*2)),j=f===0?0:f===255?255:f<128?255-_peg((255-b<<8)/(f*2)):_peg((b<<8)/((255-f)*2)),i=g===0?0:g===255?255:g<128?255-_peg((255-c<<8)/(g*2)):_peg((c<<8)/((255-g)*2)),k=k<128?0:255,j=j<128?0:255,i=i<128?0:255,[a*(255-h)/255+k*h/255,b*(255-h)/255+j*h/255,c*(255-h)/255+i*h/255,d+h]},dodge:function(a,b,c,d,e,f,g,h){return[_mix(a,_peg((a<<8)/(255-e)),h),_mix(b,_peg((b<<8)/(255-f)),h),_mix(c,_peg((c<<8)/(255-g)),h),d+h]},burn:function(a,b,c,d,e,f,g,h){return[_mix(a,e===0?0:255-_peg((255-a<<8)/e),h),_mix(b,f===0?0:255-_peg((255-b<<8)/f),h),_mix(c,g===0?0:255-_peg((255-c<<8)/g),h),d+h]},linearDodge:function(a,b,c,d,e,f,g,h){return[_mix(a,_min(e+a,255),h),_mix(b,_min(b+f,255),h),_mix(c,_min(c+g,255),h),d+h]},linearBurn:function(a,b,c,d,e,f,g,h){return[_mix(a,_max(e+a-255,0),h),_mix(b,_max(b+f-255,0),h),_mix(c,_max(c+g-255,0),h),d+h]}},exports.filters.ColorMatrixFilter=ColorMatrixFilter=function(){function a(a){this.matrix=a}return a.prototype.scan=function(a,b){var c,d,e,f,g,h,i,j,k;h=this.matrix.matrix,j=a.data,e=b.data;for(g=0,k=e.length;g<k;g+=4)i=j[g],f=j[g+1],d=j[g+2],c=j[g+3],e[g]=i*h[0]+f*h[1]+d*h[2]+c*h[3]+h[4],e[g+1]=i*h[5]+f*h[6]+d*h[7]+c*h[8]+h[9],e[g+2]=i*h[10]+f*h[11]+d*h[12]+c*h[13]+h[14],e[g+3]=i*h[15]+f*h[16]+d*h[17]+c*h[18]+h[19];return b},a}(),_LUMA_R=.212671,_LUMA_G=.71516,_LUMA_B=.072169,_LUMA_R2=.3086,_LUMA_G2=.6094,_LUMA_B2=.082,_ONETHIRD=1/3,_IDENTITY=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],_RAD=Math.PI/180,exports.geom.ColorMatrix=ColorMatrix=function(){function a(b){b instanceof a?this.matrix=b.matrix.concat():Array.isArray(b)?this.matrix=b.concat():this.reset()}return a.prototype.toString=function(){var a,b,c,d,e,f,g,h,i,j,k,l;d=[],i=this.matrix;for(a=0,h=i.length;a<h;a++)e=i[a],a%5===0&&(c=[]),c.push(String(e)),(a%5===4||a===this.matrix.length-1)&&d.push(c);for(f=0;f<5;f++){b=0;for(g=0,j=d.length;g<j;g+=1)b=Math.max(b,d[g][f].length);for(g=0,k=d.length;g<k;g+=1)d[g][f]=StringUtil.padLeft(d[g][f],b)}for(g=0,l=d.length;g<l;g+=1)d[g]=d[g].join(", "),g!==d.length-1&&(d[g]+=",");return d.join("\n")},a.prototype.clone=function(){return new a(this.matrix)},a.prototype.reset=function(){return this.matrix=_IDENTITY.concat()},a.prototype.concat=function(a){var b,c,d,e,f;b=this.matrix,d=[];for(f=0;f<4;f++){c=5*f;for(e=0;e<5;e++)d[c+e]=a[c]*b[e]+a[c+1]*b[e+5]+a[c+2]*b[e+10]+a[c+3]*b[e+15];d[c+4]+=a[c+4]}return this.matrix=d,this},a.prototype.invert=function(){return this.concat([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])},a.prototype.adjustSaturation=function(a){var b,c,d;return d=-a*_LUMA_R,c=-a*_LUMA_G,b=-a*_LUMA_B,++a,this.concat([d+a,c,b,0,0,d,c+a,b,0,0,d,c,b+a,0,0,0,0,0,1,0])},a.prototype.adjustContrast=function(a,b,c){return b==null&&(b=a),c==null&&(c=a),this.concat([1+a,0,0,0,-128*a,0,1+b,0,0,-128*b,0,0,1+c,0,-128*c,0,0,0,1,0])},a.prototype.adjustBrightness=function(a,b,c){return b==null&&(b=a),c==null&&(c=a),this.concat([1,0,0,0,255*a,0,1,0,0,255*b,0,0,1,0,255*c,0,0,0,1,0])},a.prototype.adjustHue=function(a){var b,c,d,e,f,g,h,i;return d=_LUMA_R,c=_LUMA_G,b=_LUMA_B,a*=_RAD,e=Math.cos(a),i=Math.sin(a),f=1-e,g=f-i,h=f+i,this.concat([d*g+e,c*g,b*g+i,0,0,d*f+i*.143,c*f+e+i*.14,b*f+i*-0.283,0,0,d*h-i,c*h,b*h+e,0,0,0,0,0,1,0])},a.prototype.rotateHue=function(a){return this._initHue(),this.concat(this._preHue.matrix),this.rotateBlue(a),this.concat(this._postHue.matrix)},a.prototype.luminance2Alpha=function(){return this.concat([0,0,0,0,255,0,0,0,0,255,0,0,0,0,255,_LUMA_R,_LUMA_G,_LUMA_B,0,0])},a.prototype.adjustAlphaContrast=function(a){return this.concat([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,a+1,-128*a])},a.prototype.colorize=function(a,b){var c,d,e,f,g,h,i;return b==null&&(b=1),e=_LUMA_R,d=_LUMA_G,c=_LUMA_B,i=(a>>16&255)/255,g=(a>>8&255)/255,f=(a&255)/255,h=1-b,this.concat([h+b*i*e,b*i*d,b*i*c,0,0,b*g*e,h+b*g*d,b*g*c,0,0,b*f*e,b*f*d,h+b*f*c,0,0,0,0,0,1,0])},a.prototype.setChannels=function(a,b,c,d){var e,f,g,h;return a==null&&(a=1),b==null&&(b=2),c==null&&(c=4),d==null&&(d=8),h=((a&1)===1?1:0)+((a&2)===2?1:0)+((a&4)===4?1:0)+((a&8)===8?1:0),h>0&&(h=1/h),g=((b&1)===1?1:0)+((b&2)===2?1:0)+((b&4)===4?1:0)+((b&8)===8?1:0),g>0&&(g=1/g),f=((c&1)===1?1:0)+((c&2)===2?1:0)+((c&4)===4?1:0)+((c&8)===8?1:0),f>0&&(f=1/f),e=((d&1)===1?1:0)+((d&2)===2?1:0)+((d&4)===4?1:0)+((d&8)===8?1:0),e>0&&(e=1/e),this.concat([(a&1)===1?h:0,(a&2)===2?h:0,(a&4)===4?h:0,(a&8)===8?h:0,0,(b&1)===1?g:0,(b&2)===2?g:0,(b&4)===4?g:0,(b&8)===8?g:0,0,(c&1)===1?f:0,(c&2)===2?f:0,(c&4)===4?f:0,(c&8)===8?f:0,0,(d&1)===1?e:0,(d&2)===2?e:0,(d&4)===4?e:0,(d&8)===8?e:0,0])},a.prototype.blend=function(a,b){var c,d,e,f;f=a.matrix;for(c=0,e=f.length;c<e;c++)d=f[c],this.matrix[c]=this.matrix[c]*(1-b)+d*b;return this},a.prototype.average=function(a,b,c){return a==null&&(a=_ONETHIRD),b==null&&(b=_ONETHIRD),c==null&&(c=_ONETHIRD),this.concat([a,b,c,0,0,a,b,c,0,0,a,b,c,0,0,0,0,0,1,0])},a.prototype.threshold=function(a,b){var c,d,e,f;return b==null&&(b=256),e=b*_LUMA_R,d=b*_LUMA_G,c=b*_LUMA_B,f=-b*a,this.concat([e,d,c,0,f,e,d,c,0,f,e,d,c,0,f,0,0,0,1,0])},a.prototype.desaturate=function(){var a,b,c;return c=_LUMA_R,b=_LUMA_G,a=_LUMA_B,this.concat([c,b,a,0,0,c,b,a,0,0,c,b,a,0,0,0,0,0,1,0])},a.prototype.randomize=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a==null&&(a=1),h=1-a,l=h+a*(Math.random()-Math.random()),e=a*(Math.random()-Math.random()),b=a*(Math.random()-Math.random()),i=a*255*(Math.random()-Math.random()),m=a*(Math.random()-Math.random()),f=h+a*(Math.random()-Math.random()),c=a*(Math.random()-Math.random()),j=a*255*(Math.random()-Math.random()),n=a*(Math.random()-Math.random()),g=a*(Math.random()-Math.random()),d=h+a*(Math.random()-Math.random()),k=a*255*(Math.random()-Math.random()),this.concat([l,e,b,0,i,m,f,c,0,j,n,g,d,0,k,0,0,0,1,0])},a.prototype.setMultiplicators=function(a,b,c,d){return a==null&&(a=1),b==null&&(b=1),c==null&&(c=1),d==null&&(d=1),this.concat([a,0,0,0,0,0,b,0,0,0,0,0,c,0,0,0,0,0,d,0])},a.prototype.clearChannels=function(a,b,c,d){a==null&&(a=!1),b==null&&(b=!1),c==null&&(c=!1),d==null&&(d=!1),a&&(this.matrix[0]=this.matrix[1]=this.matrix[2]=this.matrix[3]=this.matrix[4]=0),b&&(this.matrix[5]=this.matrix[6]=this.matrix[7]=this.matrix[8]=this.matrix[9]=0),c&&(this.matrix[10]=this.matrix[11]=this.matrix[12]=this.matrix[13]=this.matrix[14]=0);if(d)return this.matrix[15]=this.matrix[16]=this.matrix[17]=this.matrix[18]=this.matrix[19]=0},a.prototype.thresholdAlpha=function(a,b){return b==null&&(b=256),this.concat([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,b,-b*a])},a.prototype.averageRGB2Alpha=function(){return this.concat([0,0,0,0,255,0,0,0,0,255,0,0,0,0,255,_ONETHIRD,_ONETHIRD,_ONETHIRD,0,0])},a.prototype.invertAlpha=function(){return this.concat([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,-1,255])},a.prototype.rgb2Alpha=function(a,b,c){return this.concat([0,0,0,0,255,0,0,0,0,255,0,0,0,0,255,a,b,c,0,0])},a.prototype.setAlpha=function(a){return this.concat([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,a,0])},a.prototype.rotateRed=function(a){return this._rotateColor(a,2,1)},a.prototype.rotateGreen=function(a){return this._rotateColor(a,0,2)},a.prototype.rotateBlue=function(a){return this._rotateColor(a,1,0)},a.prototype._rotateColor=function(a,b,c){var d;return a*=_RAD,d=_IDENTITY.concat(),d[b+b*5]=d[c+c*5]=Math.cos(a),d[c+b*5]=Math.sin(a),d[b+c*5]=-Math.sin(a),this.concat(d)},a.prototype.shearRed=function(a,b){return this._shearColor(0,1,a,2,b)},a.prototype.shearGreen=function(a,b){return this._shearColor(1,0,a,2,b)},a.prototype.shearBlue=function(a,b){return this._shearColor(2,0,a,1,b)},a.prototype._shearColor=function(a,b,c,d,e){var f;return f=_IDENTITY.concat(),f[b+a*5]=c,f[d+a*5]=e,this.concat(f)},a.prototype.applyColorDeficiency=function(a){switch(a){case"Protanopia":this.concat([.567,.433,0,0,0,.558,.442,0,0,0,0,.242,.758,0,0,0,0,0,1,0]);break;case"Protanomaly":this.concat([.817,.183,0,0,0,.333,.667,0,0,0,0,.125,.875,0,0,0,0,0,1,0]);break;case"Deuteranopia":this.concat([.625,.375,0,0,0,.7,.3,0,0,0,0,.3,.7,0,0,0,0,0,1,0]);break;case"Deuteranomaly":this.concat([.8,.2,0,0,0,.258,.742,0,0,0,0,.142,.858,0,0,0,0,0,1,0]);break;case"Tritanopia":this.concat([.95,.05,0,0,0,0,.433,.567,0,0,0,.475,.525,0,0,0,0,0,1,0]);break;case"Tritanomaly":this.concat([.967,.033,0,0,0,0,.733,.267,0,0,0,.183,.817,0,0,0,0,0,1,0]);break;case"Achromatopsia":this.concat([.299,.587,.114,0,0,.299,.587,.114,0,0,.299,.587,.114,0,0,0,0,0,1,0]);break;case"Achromatomaly":this.concat([.618,.32,.062,0,0,.163,.775,.062,0,0,.163,.32,.516,0,0,0,0,0,1,0])}},a.prototype.applyMatrix=function(a){var b,c,d,e,f,g,h,i,j;return b=a>>>24&255,i=a>>>16&255,f=a>>>8&255,d=a&255,h=this.matrix,j=.5+i*h[0]+f*h[1]+d*h[2]+b*h[3]+h[4],g=.5+i*h[5]+f*h[6]+d*h[7]+b*h[8]+h[9],e=.5+i*h[10]+f*h[11]+d*h[12]+b*h[13]+h[14],c=.5+i*h[15]+f*h[16]+d*h[17]+b*h[18]+h[19],c<0&&(c=0),c>255&&(c=255),j<0&&(j=0),j>255&&(j=255),g<0&&(g=0),g>255&&(g=255),e<0&&(e=0),e>255&&(e=255),c<<24|j<<16|g<<8|e},a.prototype.transformVector=function(a){var b,c,d,e,f,g,h,i,j;if(a.length!==4)throw new TypeError("values length isn't 4");return b=this.matrix,j=a[0],i=a[1],h=a[2],g=a[3],f=j*b[0]+i*b[1]+h*b[2]+g*b[3]+b[4],e=j*b[5]+i*b[6]+h*b[7]+g*b[8]+b[9],d=j*b[10]+i*b[11]+h*b[12]+g*b[13]+b[14],c=j*b[15]+i*b[16]+h*b[17]+g*b[18]+b[19],a[0]=f,a[1]=e,a[2]=d,a[3]=c},a.prototype._initHue=function(){var b,c,d,e;c=39.182655;if(!this._hueInitialized)return this._hueInitialized=!0,this._preHue=new a,this._preHue.rotateRed(45),this._preHue.rotateGreen(-c),d=[_LUMA_R2,_LUMA_G2,_LUMA_B2,1],this._preHue.transformVector(d),e=d[0]/d[2],b=d[1]/d[2],this._preHue.shearBlue(e,b),this._postHue=new a,this._postHue.shearBlue(-e,-b),this._postHue.rotateGreen(c),this._postHue.rotateRed(-45)},a}(),_sin=Math.sin,_cos=Math.cos,_tan=Math.tan,exports.geom.Matrix=Matrix=function(){function a(a,b,c,d,e,f){this.xx=a!=null?a:1,this.xy=b!=null?b:0,this.yx=c!=null?c:0,this.yy=d!=null?d:1,this.ox=e!=null?e:0,this.oy=f!=null?f:0}return a.prototype.identity=function(){return this.xx=1,this.xy=0,this.yx=0,this.yy=1,this.ox=0,this.oy=0},a.prototype.clone=function(){return new a(this.xx,this.xy,this.yx,this.yy,this.ox,this.oy)},a.prototype.toString=function(){return""+this.xx+" "+this.yx+" "+this.ox+"\n"+this.xy+" "+this.yy+" "+this.oy+"\n0 0 1"},a.prototype.apply=function(a){return this._apply(a.xx,a.xy,a.yx,a.yy,a.ox,a.oy)},a.prototype._apply=function(a,b,c,d,e,f){return this.xx=a,this.xy=b,this.yx=c,this.yy=d,this.ox=e,this.oy=f,this},a.prototype.setTo=function(a){return a.setTransform(this.xx,this.xy,this.yx,this.yy,this.ox,this.oy)},a.prototype.concat=function(a){return this._concat(a.xx,a.xy,a.yx,a.yy,a.ox,a.oy)},a.prototype._concat=function(a,b,c,d,e,f){var g,h,i,j,k,l;return i=this.xx,j=this.xy,k=this.yx,l=this.yy,g=this.ox,h=this.oy,this.xx=a*i+c*j,this.xy=b*i+d*j,this.yx=a*k+c*l,this.yy=b*k+d*l,this.ox=a*g+c*h+e,this.oy=b*g+d*h+f,this},a.prototype.translate=function(a,b){return this._concat(1,0,0,1,a,b)},a.prototype.scale=function(a,b){return this._concat(a,0,0,b,0,0)},a.prototype.rotate=function(a){var b,c;return b=_cos(a),c=_sin(a),this._concat(b,c,-c,b,0,0)},a.prototype.skew=function(a,b){return this._concat(0,_tan(b),_tan(a),0,0,0)},a.prototype.invert=function(){var a,b,c,d,e,f,g;return d=this.xx,e=this.xy,f=this.yx,g=this.yy,b=this.ox,c=this.oy,a=d*g-e*f,this.xx=g/a,this.xy=-e/a,this.yx=-f/a,this.yy=d/a,this.ox=(f*c-g*b)/a,this.oy=(e*b-d*c)/a,this},a.prototype.transformPoint=function(a){return new Point(this.xx*a.x+this.yx*a.y+this.ox,this.xy*a.x+this.yy*a.y+this.oy)},a.prototype.deltaTransformPoint=function(a){return new Point(this.xx*a.x+this.yx*a.y,this.xy*a.x+this.yy*a.y)},a.prototype.createBox=function(a,b,c,d,e){var f,g;return c==null&&(c=0),d==null&&(d=0),e==null&&(e=0),f=_cos(c),g=_sin(c),this._concat(a*f,b*g,-a*g,b*f,d,e)},a.prototype.createGradientBox=function(a,b,c,d,e){return c==null&&(c=0),d==null&&(d=0),e==null&&(e=0),this.createBox(a/1638.4,b/1638.4,c,d+a/2,e+b/2)},a}(),exports.geom.Point=Point=function(){function a(a,b){this.x=a!=null?a:0,this.y=b!=null?b:0}return a.polar=function(b,c){return new a(b*_cos(c),b*_sin(c))},a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.subtract=function(b,c){return new a(b.x-c.x,b.y-c.y)},a.multiple=function(b,c){return new a(b.x*c,b.y*c)},a.divide=function(b,c){return new a(b.x/c,b.y/c)},a.crossProduct=function(a,b){return a.distance*b.distance*_sin(b.angle-a.angle)},a.dotProduct=function(a,b){},a.distance=function(a,b){var c,d;return c=a.x-b.x,d=a.y-b.y,Math.sqrt(c*c+d*d)},a.between=function(b,c,d){return d==null&&(d=.5),new a(b.x+(c.x-b.x)*d,b.y+(c.y-b.y)*d)},a.prototype.distance=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.angle=function(){return Math.atan2(this.y,this.x)},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.subtract=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.multiple=function(a){return this.x*=a,this.y*=a,this},a.prototype.divide=function(a){return this.x/=a,this.y/=a,this},a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},a.prototype.toPolar=function(){return new Polar(this.distance,this.angle)},a.prototype.equals=function(a){return this.x===a.x&&this.y===a.y},a.prototype.normalize=function(a){var b;return a==null&&(a=1),b=a/Math.sqrt(this.x*this.x+this.y*this.y),this.x*=b,this.y*=b,this},a.prototype.transform=function(a){var b;return b=new Matrix(1,0,0,1,this.x,this.y),b.concat(a),this.x=b.ox,this.y=b.oy,this},a}(),exports.net.HTTP=HTTP={createFormData:function(a){var b,c,d,e;b=new FormData;for(d=0,e=a.length;d<e;d++)c=a[d],b.append(c,d);return b},get:function(a,b){return a.method="get",this.request(a,b)},post:function(a,b){return a.method="post",this.request(a,b)},request:function(a,b){var c,d,e,f,g,h,i,j;return f=((i=a.method)!=null?i.toLowerCase():void 0)||"get",g=a.url,e=(j=a.dataType)!=null?j.toLowerCase():void 0,d=a.data,d instanceof FormData||(e==="json"?c="application/json;charset=UTF-8":c="application/x-www-form-urlencoded;charset=UTF-8"),f==="get"&&d!=null&&(g=""+g+"?"+d,d=null),h=new(window.ActiveXObject||XMLHTTPRequest)("Microsoft.XMLHTTP"),a.onProgress!=null&&(h.upload.onprogress=function(b){if(b.lengthComputable)return a.onProgress(b.loaded/b.total)}),a.onComplete!=null&&(h.upload.onload=function(b){return a.onComplete()}),b!=null&&(h.onreadystatechange=function(a){var c;if(h.readyState===4)return(c=h.status)===0||c===200?(d=h.responseText,b(null,d)):b({code:h.status,message:""+h.status+" ("+h.statusText+")"+(h.responseText?": "+h.responseText:"")})}),h.open(f,g,!0),typeof h.overrideMimeType=="function"&&h.overrideMimeType("text/plain"),h.setRequestHeader("X-Requested-With","XMLHTTPRequest"),c&&h.setRequestHeader("content-type",c),h.send(d)}},exports.serializer.JSON=JSON=function(){return window.JSON!=null?window.JSON:(JSON={},function(){var cx,escapable,f,gap,indent,meta,quote,rep,str;f=function(a){return a<10?"0"+a:a},typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap=null,indent=null,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep=null,quote=function(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b;return b=meta[a],typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},str=function(a,b){var c,d,e,f,g,h,i;f=gap,i=b[a],i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,g=[];if(Object.prototype.toString.apply(i)==="[object Array]"){e=i.length,c=0;while(c<e)g[c]=str(c,i)||"null",c+=1;return h=g.length===0?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+f+"]":"["+g.join(",")+"]",gap=f,h}if(rep&&typeof rep=="object"){e=rep.length,c=0;while(c<e)typeof rep[c]=="string"&&(d=rep[c],h=str(d,i),h&&g.push(quote(d)+(gap?": ":":")+h)),c+=1}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(h=str(d,i),h&&g.push(quote(d)+(gap?": ":":")+h));return g.length===0?h="{}":gap?h="{\n"+gap+g.join(",\n"+gap)+"\n"+f+"}":h="{"+g.join(",")+"}",gap=f,h}},typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number"){d=0;while(d<c)indent+=" ",d+=1}else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")});if(typeof JSON.parse!="function")return JSON.parse=function(text,reviver){var j,walk;walk=function(a,b){var c,d,e;e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==void 0?e[c]=d:delete e[c]);return reviver.call(a,b,e)},j=void 0,text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(),JSON)}(),exports.serializer.QueryString=QueryString={stringify:function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(""+b+"="+encodeURIComponent(d));return c.join("&")},parse:function(a){var b,c,d,e,f,g;if(a==="")return{};e=a.split("&");if(e.length===0)throw new TypeError("QueryString.parse: query is invalid");b={};for(f=0,g=e.length;f<g;f++)d=e[f],c=d.split("="),b[c[0]]=decodeURIComponent(c[1]);return b}},exports.utils.ArrayUtil=ArrayUtil={isArray:Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},random:function(a,b){var c;b==null&&(b=1);if(b===1)return a[a.length*Math.random()>>0];a=Array.prototype.slice.call(a),c=[];while(b--)c.push(a.splice(a.length*Math.random()>>0,1)[0]);return c},shuffle:function(a){var b,c,d;b=a.length;while(b)c=Math.random()*b>>0,d=a[--b],a[b]=a[c],a[c]=d;return a}},exports.utils.CSSUtil=CSSUtil={parseMatrixString:function(a){var b,c;return b=a.match(/matrix\(\s*([^,]+)\s*,\s*([^,]+)\s*,\s*([^,]+)\s*,\s*([^,]+)\s*,\s*([^,]+)\s*,\s*([^,]+)\s*\)/),b==null?null:(c=window.parseInt,new Matrix(c(b[1],10),c(b[2],10),c(b[3],10),c(b[4],10),c(b[5],10),c(b[6],10)))}},exports.utils.MathUtil=MathUtil={DEGREE_PER_RADIAN:180/Math.PI,RADIAN_PER_DEGREE:Math.PI/180,nearestIn:function(a,b){var c,d,e,f;c=[];for(e=0,f=b.length;e<f;e++)d=b[e],c.push(Math.abs(d-a));return b[c.indexOf(Math.min.apply(null,c))]},randomBetween:function(a,b){return a+(b-a)*Math.random()},convergeBetween:function(a,b,c){var d,e;return e=Math.min(b,c),d=Math.max(b,c),a<e?e:a>d?d:a}},exports.utils.ObjectUtil=ObjectUtil={keys:Object.keys||function(a){var b,c,d;if((c=typeof a)!=="object"&&c!=="function")throw new TypeError(""+a+" isn't Object object");d=[];for(b in a){if(!__hasProp.call(a,b))continue;d.push(b)}return d}},exports.utils.StringUtil=StringUtil={pad:function(a,b,c){c==null&&(c=" "),a=""+a;while(a.length<b)a=(b-a.length&1)===0?c+a:a+c;return a},padLeft:function(a,b,c){c==null&&(c=" "),a=""+a;while(a.length<b)a=c+a;return a},padRight:function(a,b,c){c==null&&(c=" "),a=""+a;while(a.length<b)a+=c;return a},escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},createRandom:function(a,b){var c,d;b==null&&(b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),c=b.length,d="";while(d.length<a)d+=b[Math.random()*c>>0];return d},formatWithComma:function(a){var b,c,d;a=""+a,b=a.length,c=0,d="";while(b--)d=(++c%3===0&&b!==0?",":"")+a.charAt(b)+d;return d}}}).call(this)