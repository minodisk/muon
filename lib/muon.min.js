/**
 * @fileOverview
 * @name muon.js
 * @author Daisuke Mino daisuke.mino@gmail.com
 * @url https://github.com/minodisk/muon
 * @version 0.1.1
 * @license MIT License
 */
(function(){"use strict";var t=function(){function t(t,n){if(s[t]!=null)throw Error("Cannot overwrite module '"+t+"'");s[t]=this,this.id=t,this.definition=n}var n=Object.prototype.toString,r=Array.isArray||function(t){return n.call(t)==="[object Array]"},i=function(){},e=function(t,n){var i;for(i in t)t.hasOwnProperty(i)&&(typeof t[i]=="object"?(n[i]=r(t[i])?[]:{},e(t[i],n[i])):n[i]=t[i])},o=function(t,n){i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n.prototype.constructor=n},s={};return t.define=function(n,r){new t(n,r)},t.prototype.require=function(t){var n=s[t];if(n==null)throw Error("Cannot find module '"+t+"'");return n._require()},t.prototype._require=function(){return this.exports!=null?this.exports:(this.exports={},this.definition.call(this.exports,this,this.exports),this.exports)},t.prototype.extend=function(t,n){return n==null&&(n={}),e(t,n),o(t,n),n},t.prototype.mix=function(){var t,n,r,i={};for(t=0,n=arguments.length;n>t;t++)r=arguments[t],e(r,i);return i},t.prototype.bind=function(t,n){return function(){return t.apply(n,Array.prototype.slice.call(arguments))}},t}(),n=t.define;n("errors.ErrorMessage",function(t){var n={};n.createInvalidNumberOfParameter=function(t){return"Invalid number of parameters, expected "+t},t.exports=n}),n("events.Event",function(t){function n(t,r,i){var e;return r==null&&(r=!1),i==null&&(i=!1),this instanceof n?(t instanceof n&&(e=t,t=e.type,r=e.bubbles,i=e.cancelable,this.currentTarget=e.currentTarget,this.target=e.target),this.type=t,this.bubbles=r,this.cancelable=i,this._isPropagationStopped=!1,this._isPropagationStoppedImmediately=!1,this._isDefaultPrevented=!1,void 0):new n(t,r,i)}n.prototype.formatToString=function(){},n.prototype.stopPropagation=function(){this._isPropagationStopped=!0},n.prototype.stopImmediatePropagation=function(){this._isPropagationStopped=!0,this._isPropagationStoppedImmediately=!0},n.prototype.isDefaultPrevented=function(){return this._isDefaultPrevented},n.prototype.preventDefault=function(){this._isDefaultPrevented=!0},t.exports=n}),n("events.EventEmitter",function(t){function n(){this._events={}}var r=require("muon.events.Event"),i=require("muon.events.EventPhase");n.prototype.on=function(t,n,r,i){if(typeof t!="string")throw new ErrorMessage("EventEmitter#addEventListener: type isn't string");if(typeof n!="function")throw new ErrorMessage("EventEmitter#addEventListener: listener isn't function");return r==null&&(r=!1),i==null&&(i=0),this._events[t]==null&&(this._events[t]=[]),this._events[t].push({listener:n,useCapture:r,priority:i}),this._events[t].sort(this._sortOnPriorityInDescendingOrder),this},n.prototype._sortOnPriorityInDescendingOrder=function(t,n){return n.priority-t.priority},n.prototype.off=function(t,n){var r,i;if(i=this._events[t]){r=i.length;while(r--)i[r].listener===n&&i.splice(r,1);i.length===0&&delete this._events[t]}return this},n.prototype.emit=function(t){var n,e,o,s;if(!(t instanceof r))throw new ErrorMessage("EventEmitter#dispatchEvent: event isn't Event");if(t.currentTarget=this,(e=this._events[t.type])!=null)for(o=0,s=e.length;s>o;o++)if(n=e[o],(n.useCapture&&t.eventPhase===i.CAPTURING_PHASE||n.useCapture===!1&&t.eventPhase!==i.CAPTURING_PHASE)&&(function(t,n){return setTimeout(function(){return t.listener(n)},0)}(n,t),t._isPropagationStoppedImmediately))break;return!t._isDefaultPrevented},t.exports=n}),n("events.EventPhase",function(t){var n={CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3};t.exports=n}),n("geom.Matrix",function(t){function n(t,n,r,i,e,o){this.xx=t!=null?t:1,this.xy=n!=null?n:0,this.yx=r!=null?r:0,this.yy=i!=null?i:1,this.ox=e!=null?e:0,this.oy=o!=null?o:0}var r=require("geom.Point"),i=Math.sin,e=Math.cos,o=Math.tan;n.prototype.identity=function(){return this.xx=1,this.xy=0,this.yx=0,this.yy=1,this.ox=0,this.oy=0},n.prototype.clone=function(){return new n(this.xx,this.xy,this.yx,this.yy,this.ox,this.oy)},n.prototype.toString=function(){return""+this.xx+" "+this.yx+" "+this.ox+"\n"+this.xy+" "+this.yy+" "+this.oy+"\n0 0 1"},n.prototype.apply=function(t){var n,r,i,e,o,s;return i=t.xx,e=t.xy,o=t.yx,s=t.yy,n=t.ox,r=t.oy,this._apply(i,e,o,s,n,r)},n.prototype._apply=function(t,n,r,i,e,o){return this.xx=t,this.xy=n,this.yx=r,this.yy=i,this.ox=e,this.oy=o,this},n.prototype.setTo=function(t){return t.setTransform(this.xx,this.xy,this.yx,this.yy,this.ox,this.oy)},n.prototype.concat=function(t){var n,r,i,e,o,s;return i=t.xx,e=t.xy,o=t.yx,s=t.yy,n=t.ox,r=t.oy,this._concat(i,e,o,s,n,r)},n.prototype._concat=function(t,n,r,i,e,o){var s,h,u,y,a,p;return u=this.xx,y=this.xy,a=this.yx,p=this.yy,s=this.ox,h=this.oy,this.xx=t*u+r*y,this.xy=n*u+i*y,this.yx=t*a+r*p,this.yy=n*a+i*p,this.ox=t*s+r*h+e,this.oy=n*s+i*h+o,this},n.prototype.translate=function(t,n){return this._concat(1,0,0,1,t,n)},n.prototype.translatePoint=function(t){var n,r;return n=t.x,r=t.y,this.translate(n,r)},n.prototype.scale=function(t,n){return this._concat(t,0,0,n,0,0)},n.prototype.scalePoint=function(t){var n,r;return n=t.x,r=t.y,this.scale(n,r)},n.prototype.rotate=function(t){var n,r;return n=e(t),r=i(t),this._concat(n,r,-r,n,0,0)},n.prototype.skew=function(t,n){return this._concat(0,o(n),o(t),0,0,0)},n.prototype.invert=function(){var t,n,r,i,e,o,s;return i=this.xx,e=this.xy,o=this.yx,s=this.yy,n=this.ox,r=this.oy,t=i*s-e*o,this.xx=s/t,this.xy=-e/t,this.yx=-o/t,this.yy=i/t,this.ox=(o*r-s*n)/t,this.oy=(e*n-i*r)/t,this},n.prototype.transformPoint=function(t){var n,i;return n=t.x,i=t.y,new r(this.xx*n+this.yx*i+this.ox,this.xy*n+this.yy*i+this.oy)},n.prototype.deltaTransformPoint=function(t){var n,i;return n=t.x,i=t.y,new r(this.xx*n+this.yx*i,this.xy*n+this.yy*i)},n.prototype.createBox=function(t,n,r,o,s){var h,u;return r==null&&(r=0),o==null&&(o=0),s==null&&(s=0),h=e(r),u=i(r),this._concat(t*h,n*u,-t*u,n*h,o,s)},n.prototype.createGradientBox=function(t,n,r,i,e){return r==null&&(r=0),i==null&&(i=0),e==null&&(e=0),this.createBox(t/1638.4,n/1638.4,r,i+t/2,e+n/2)},t.exports=n}),n("geom.Point",function(t){function n(t,n){this.x=t!=null?t:0,this.y=n!=null?n:0}var r=require("geom.Matrix"),i=Math.sin,e=Math.cos,o=Math.sqrt,s=Math.atan2;n.polar=function(t,r){return new n(t*e(r),t*i(r))},n.add=function(t,r){return new n(t.x+r.x,t.y+r.y)},n.subtract=function(t,r){return new n(t.x-r.x,t.y-r.y)},n.multiple=function(t,r){return new n(t.x*r,t.y*r)},n.divide=function(t,r){return new n(t.x/r,t.y/r)},n.crossProduct=function(t,n){return t.distance*n.distance*i(n.angle-t.angle)},n.dotProduct=function(){},n.distance=function(t,n){var r,i;return r=t.x-n.x,i=t.y-n.y,o(r*r+i*i)},n.between=function(t,r,i){return i==null&&(i=.5),new n(t.x+(r.x-t.x)*i,t.y+(r.y-t.y)*i)},n.prototype.distance=function(){return o(this.x*this.x+this.y*this.y)},n.prototype.angle=function(){return s(this.y,this.x)},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.multiple=function(t){return this.x*=t,this.y*=t,this},n.prototype.divide=function(t){return this.x/=t,this.y/=t,this},n.prototype.toString=function(){return"("+this.x+", "+this.y+")"},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},n.prototype.normalize=function(t){var n;return t==null&&(t=1),n=t/o(this.x*this.x+this.y*this.y),this.x*=n,this.y*=n,this},n.prototype.transform=function(t){var n;return n=new r(1,0,0,1,this.x,this.y),n.concat(t),this.x=n.ox,this.y=n.oy,this},t.exports=n}),n("geom.Rectangle",function(t){function n(t,n,r,i){this.x=t!=null?t:0,this.y=n!=null?n:0,this.width=r!=null?r:0,this.height=i!=null?i:0}var r=require("geom.Matrix"),i=Math.min,e=Math.max,o=Math.floor,s=Math.ceil,h=Math.sqrt;n.prototype.toString=function(){return"[Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n.prototype.left=function(){return i(this.x,this.x+this.width)},n.prototype.right=function(){return e(this.x,this.x+this.width)},n.prototype.top=function(){return i(this.y,this.y+this.height)},n.prototype.bottom=function(){return e(this.y,this.y+this.height)},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.apply=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},n.prototype.contains=function(t,n){return t>this.x&&this.x+this.width>t&&n>this.y&&this.y+this.height>n},n.prototype.containsPoint=function(t){return this.contains(t.x,t.y)},n.prototype.contain=function(t,n){return this.x>t?(this.width+=this.x-t,this.x=t):t>this.x+this.width&&(this.width=t-this.x),this.y>n?(this.height+=this.y-n,this.y=n):n>this.y+this.height&&(this.height=n-this.y),this},n.prototype.containPoint=function(t){return this.contain(t.x,t.y)},n.prototype.offset=function(t,n){return this.x+=t,this.y+=n,this},n.prototype.offsetPoint=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.inflate=function(t,n){return this.width+=t,this.height+=n,this},n.prototype.inflatePoint=function(t){return this.width+=t.x,this.height+=t.y,this},n.prototype.deflate=function(t,n){return this.width-=t,this.height-=n,this},n.prototype.deflatePoint=function(t){return this.width-=t.x,this.height-=t.y,this},n.prototype.union=function(t){var n,r,i,e,o,s,h,u,y,a;return o=t.x>this.x?this.x:t.x,h=this.x+this.width,u=t.x+t.width,s=h>u?h:u,a=s-o,y=t.y>this.y?this.y:t.y,r=this.y+this.height,i=t.y+t.height,n=r>i?r:i,e=n-y,this.x=o,this.y=y,this.width=0>a?0:a,this.height=0>e?0:e,this},n.prototype.isEmpty=function(){return this.x===0&&this.y===0&&this.width===0&&this.height===0},n.prototype.intersects=function(t){var n,r,o,s,h,u;return o=e(this.x,t.x),s=i(this.x+this.width,t.x+t.width),u=s-o,u>0?(h=e(this.y,t.y),n=i(this.y+this.height,t.y+t.height),r=n-h,r>0?!0:!1):!1},n.prototype.intersection=function(t){var r,o,s,h,u,y;return s=e(this.x,t.x),h=i(this.x+this.width,t.x+t.width),y=h-s,y>0?(u=e(this.y,t.y),r=i(this.y+this.height,t.y+t.height),o=r-u,o>0?new n(s,u,y,o):new n):new n},n.prototype.measureFarDistance=function(t,n){var r,i,o,s,u,y,a,p,l;return y=this.x,p=this.x+this.width,l=this.y,r=this.y+this.height,o=t-y,s=t-p,u=n-l,i=n-r,o*=o,s*=s,u*=u,i*=i,a=e(o+u,s+u,s+i,o+i),h(a)},n.prototype.adjustOuter=function(){var t,n;return t=o(this.x),n=o(this.y),t!==this.x&&this.width++,n!==this.y&&this.height++,this.x=t,this.y=n,this.width=s(this.width),this.height=s(this.height),this},n.prototype.transform=function(t){var n,o,s,h,u,y,a,p;return h=new r(1,0,0,1,this.x,this.y),a=new r(1,0,0,1,this.x+this.width,this.y),y=new r(1,0,0,1,this.x+this.width,this.y+this.height),s=new r(1,0,0,1,this.x,this.y+this.height),h.concat(t),a.concat(t),y.concat(t),s.concat(t),o=i(h.ox,a.ox,y.ox,s.ox),u=e(h.ox,a.ox,y.ox,s.ox),p=i(h.oy,a.oy,y.oy,s.oy),n=e(h.oy,a.oy,y.oy,s.oy),this.x=o,this.y=p,this.width=u-o,this.height=n-p,this},t.exports=n}),n("net.url",function(t,n){var r=require("muon.serializer.querystring");require("muon.utils.array");var i=/^((\w+:)(\/*)?(?:([^@]*)@)?(([^\/]+?)(?::(\d*))?))((\/[^\?#]*)?(\?([^#]*)?)?)?(#.*)?$/;n.parse=function(t,n){n==null&&(n=!1);var e,o,s,h,u=t.match(i),y=u[0],a=u[1],p=u[2],l=u[3],f=u[4],c=u[5],x=u[6],g=u[7],d=u[8],w=u[9],v=u[10],m=u[11],E=u[12];e={href:y,origin:a,protocol:p,host:c,hostname:x},n&&(m=r.parse(m)),o={auth:f,port:g,path:d,pathname:w,search:v,query:m,hash:E},l!=null&&(e.slashes=!0,d==null&&(e.path=e.pathname="/",e.href+="/"));for(s in o)h=o[s],h&&(e[s]=h);return e},n.format=function(t){var n=t.protocol,i=0>__indexOf.call(URL.CSS,n)?":":"://",e=(t.auth,t.host),o=t.hostname,s=t.port,h=t.pathname,u=t.search,y=t.query,a=t.hash;return e==null&&(e="",o!=null&&(e+=o),s!=null&&(e+=":"+s)),h.charAt(0)!=="/"&&(h="/"+h),u!=null?u.charAt(0)!=="?"&&(u="?"+u):y!=null&&(u="?"+r.stringify(y)),a!=null&&a.charAt(0)!=="#"&&(a="#"+a),n+i+e+h+u+a},n.resolve=function(){}}),n("serializer.querystring",function(t,n){var r=encodeURIComponent;n.stringify=function(t){var n,i=[];for(n in t)i.push(n+"="+r(t[n]));return i.join("&")},n.parse=function(t){if(t==null)return{};var n,i=t.split("&"),e={},o=0,s=i.length;if(s===0)throw new ErrorMessage;for(;s>o;o++)n=i[o].split("="),e[n[0]]=r(n[1]);return e}}),n("timers.Ticker",function(t){function n(){}require("muon.events.EventEmitter"),function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(){var t=0;return function(n){return setTimeout(n,66),t++}}()}(),t.exports=n}),n("utils.array",function(t,n){var r=Math.random,i=Array.prototype.shift,e=Array.prototype.slice,o=Object.prototype.toString;n.isArray=Array.isArray||function(t){return o.call(t)==="[object Array]"},n.indexOf=typeof Array.prototype.indexOf=="function"?function(){return Array.prototype.indexOf.apply(i.call(arguments),arguments)}:function(t,n,r){if(t==null)throw new TypeError("array.indexOf called on null or undefined");var i=t.length;if(i===0)return-1;var e;if(e=r==null?0:0>r?r+i:r,0>e)e=0;else if(e>i-1)return-1;for(;i>e;e++)if(t[e]===n)return e;return-1},n.lastIndexOf=typeof Array.prototype.lastIndexOf=="function"?function(){return Array.prototype.lastIndexOf.apply(i.call(arguments),arguments)}:function(t,n,r){if(t==null)throw new TypeError;var i=t.length;if(i===0)return-1;var e;if(e=r==null?i:0>r?i+r:r,0>e)return-1;for(e>i-1&&(e=i-1);e>=0;e--)if(t[e]===n)return e;return-1},n.include=function(t,r){return n.indexOf(t,r)!==-1},n.compact=function(t){var n=t.length,r=[];while(n--)t[n]!=null&&r.unshift(t[n]);return r},n.delete=function(t,n){var r=t.length,i=null;while(r--)t[r]===n&&(i=t.splice(r,1),i=i.length===1?i[0]:null);return i},n.deleteAt=function(t,n){var r=t.splice(n,1);return r.length===1?r[0]:null},n.random=function(t,n){if(t==null)throw new TypeError;if(n==null&&(n=1),t.length===0||0>=n)return null;if(n===1)return t[t.length*r()>>0];t=e.call(t);var i=[];while(n--&&t.length)i.push(t.splice(t.length*r()>>0,1)[0]);return i},n.shuffle=function(t){if(t==null)throw new TypeError;t=e.call(t);var n,i,o=t.length;while(o)n=r()*o>>0,i=t[--o],t[o]=t[n],t[n]=i;return t},n.filter=typeof Array.prototype.filter=="function"?function(){return Array.prototype.filter.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s,h;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(h=[],i=o=0,s=t.length;s>o;i=++o)e=t[i],i in t&&n.call(r,e,i,t)&&h.push(e);return h},n.forEach=typeof Array.prototype.forEach=="function"?function(){Array.prototype.forEach.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(i=o=0,s=t.length;s>o;i=++o)e=t[i],i in t&&n.call(r,e,i,t)},n.every=typeof Array.prototype.every=="function"?function(){return Array.prototype.every.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(i=o=0,s=t.length;s>o;i=++o)if(e=t[i],i in t&&!n.call(r,e,i,t))return!1;return!0},n.map=typeof Array.prototype.map=="function"?function(){return Array.prototype.map.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s,h;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(h=[],i=o=0,s=t.length;s>o;i=++o)e=t[i],i in t&&h.push(n.call(r,e,i,t));return h},n.some=typeof Array.prototype.some=="function"?function(){return Array.prototype.some.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(i=o=0,s=t.length;s>o;i=++o)if(e=t[i],i(fo(t&&n.call(r,e,i,t))))return!0;return!1},n.reduce=typeof Array.prototype.reduce=="function"?function(){return Array.prototype.reduce.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s,h;if(r==null&&(r=null),e=t.length,typeof n!="function"||e===0&&r===null)throw new TypeError;if(i=0,r===null)for(;;){if(i in t){r=t[i++];break}if(++i>e)throw new TypeError}for(o=s=i,h=e-1;s>=h;o=s+=-1)o in t&&(r=n.call(null,r,t[o],o,t));return r},n.reduceRight=typeof Array.prototype.reduceRight=="function"?function(){return Array.prototype.reduceRight.apply(i.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),e=t.length,typeof n!="function"||e===0&&r===null)throw new TypeError;if(i=e-1,r===null)for(;;){if(i in t){r=t[i--];break}if(e>=--i)throw new TypeError}for(o=s=i;s>=0;o=s+=-1)o in t&&(r=n.call(null,r,t[o],o,t));return r},n.toArray=function(t){return e.call(t)},n.unique=function(t){var n;n={};for(var r,i=0;t.length>i;++i)r=t[i],r in n&&t.splice(i--,1),n[r]=!0;return t},n.rotate=function(t,n){if(n==null&&(n=1),n>0)while(n--)t.push(t.shift());else if(0>n){n*=-1;while(n--)t.unshift(t.pop())}return t},n.transpose=function(t){var n,r,i,e,o,s,h,u,y,a,p;for(s=[],r=-1,e=u=0,a=t.length;a>u;e=++u){if(h=t[e],!ArrayUtil.isArray(h))throw new TypeError("Element isn't Array.");if(n=h.length,e!==0&&n!==r)throw Error("Element size differ ("+n+" should be "+r+")");if(r=n,e===0)while(n--)s[n]=[];for(o=y=0,p=h.length;p>y;o=++y)i=h[o],s[o].push(i)}return s}}),this.require=t.prototype.require}).call(this)