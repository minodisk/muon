/**
 * @fileOverview
 * @name muon.js
 * @author Daisuke Mino daisuke.mino@gmail.com
 * @url https://github.com/minodisk/muon
 * @version 0.1.2
 * @license MIT License
 */
(function(){"use strict";var t=function(){function t(t,n){if(s[t]!=null)throw Error("Cannot overwrite module '"+t+"'");s[t]=this,this.id=t,this.definition=n}var n=Object.prototype.toString,r=Array.isArray||function(t){return n.call(t)==="[object Array]"},i=function(){},e=function(t,n){var i;for(i in t)t.hasOwnProperty(i)&&(typeof t[i]=="object"?(n[i]=r(t[i])?[]:{},e(t[i],n[i])):n[i]=t[i])},o=function(t,n){i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n.prototype.constructor=n},s={};return t.define=function(n,r){new t(n,r)},t.require=function(t){var n=s[t];if(n==null)throw Error("Cannot find module '"+t+"'");return n._require()},t.prototype._require=function(){return this.exports!=null?this.exports:(this.exports={},this.definition.call(this.exports,t.require,this,this.exports),this.exports)},t.prototype.extend=function(t,n){return n==null&&(n={}),e(t,n),o(t,n),n},t.prototype.mix=function(){var t,n,r,i={};for(t=0,n=arguments.length;n>t;t++)r=arguments[t],e(r,i);return i},t.prototype.bind=function(t,n){return function(){return t.apply(n,Array.prototype.slice.call(arguments))}},t}(),n=t.define;n("errors.ErrorMessage",function(t,n){var r={};r.createInvalidNumberOfParameter=function(t){return"Invalid number of parameters, expected "+t},n.exports=r}),n("events.Event",function(t,n){function r(t,n,i){var e;return n==null&&(n=!1),i==null&&(i=!1),this instanceof r?(t instanceof r&&(e=t,t=e.type,n=e.bubbles,i=e.cancelable,this.currentTarget=e.currentTarget,this.target=e.target),this.type=t,this.bubbles=n,this.cancelable=i,this._isPropagationStopped=!1,this._isPropagationStoppedImmediately=!1,this._isDefaultPrevented=!1,void 0):new r(t,n,i)}r.prototype.formatToString=function(){},r.prototype.stopPropagation=function(){this._isPropagationStopped=!0},r.prototype.stopImmediatePropagation=function(){this._isPropagationStopped=!0,this._isPropagationStoppedImmediately=!0},r.prototype.isDefaultPrevented=function(){return this._isDefaultPrevented},r.prototype.preventDefault=function(){this._isDefaultPrevented=!0},n.exports=r}),n("events.EventEmitter",function(t,n){function r(){this._events={}}var i=t("muon.events.Event"),e=t("muon.events.EventPhase");r.prototype.on=function(t,n,r,i){if(typeof t!="string")throw new ErrorMessage("EventEmitter#addEventListener: type isn't string");if(typeof n!="function")throw new ErrorMessage("EventEmitter#addEventListener: listener isn't function");return r==null&&(r=!1),i==null&&(i=0),this._events[t]==null&&(this._events[t]=[]),this._events[t].push({listener:n,useCapture:r,priority:i}),this._events[t].sort(this._sortOnPriorityInDescendingOrder),this},r.prototype._sortOnPriorityInDescendingOrder=function(t,n){return n.priority-t.priority},r.prototype.off=function(t,n){var r,i;if(i=this._events[t]){r=i.length;while(r--)i[r].listener===n&&i.splice(r,1);i.length===0&&delete this._events[t]}return this},r.prototype.emit=function(t){var n,r,o,s;if(!(t instanceof i))throw new ErrorMessage("EventEmitter#dispatchEvent: event isn't Event");if(t.currentTarget=this,(r=this._events[t.type])!=null)for(o=0,s=r.length;s>o;o++)if(n=r[o],(n.useCapture&&t.eventPhase===e.CAPTURING_PHASE||n.useCapture===!1&&t.eventPhase!==e.CAPTURING_PHASE)&&(function(t,n){return setTimeout(function(){return t.listener(n)},0)}(n,t),t._isPropagationStoppedImmediately))break;return!t._isDefaultPrevented},n.exports=r}),n("events.EventPhase",function(t,n){var r={CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3};n.exports=r}),n("geom.Matrix",function(t,n){function r(t,n,r,i,e,o){this.xx=t!=null?t:1,this.xy=n!=null?n:0,this.yx=r!=null?r:0,this.yy=i!=null?i:1,this.ox=e!=null?e:0,this.oy=o!=null?o:0}var i=t("geom.Point"),e=Math.sin,o=Math.cos,s=Math.tan;r.prototype.identity=function(){return this.xx=1,this.xy=0,this.yx=0,this.yy=1,this.ox=0,this.oy=0},r.prototype.clone=function(){return new r(this.xx,this.xy,this.yx,this.yy,this.ox,this.oy)},r.prototype.toString=function(){return""+this.xx+" "+this.yx+" "+this.ox+"\n"+this.xy+" "+this.yy+" "+this.oy+"\n0 0 1"},r.prototype.apply=function(t){var n,r,i,e,o,s;return i=t.xx,e=t.xy,o=t.yx,s=t.yy,n=t.ox,r=t.oy,this._apply(i,e,o,s,n,r)},r.prototype._apply=function(t,n,r,i,e,o){return this.xx=t,this.xy=n,this.yx=r,this.yy=i,this.ox=e,this.oy=o,this},r.prototype.setTo=function(t){return t.setTransform(this.xx,this.xy,this.yx,this.yy,this.ox,this.oy)},r.prototype.concat=function(t){var n,r,i,e,o,s;return i=t.xx,e=t.xy,o=t.yx,s=t.yy,n=t.ox,r=t.oy,this._concat(i,e,o,s,n,r)},r.prototype._concat=function(t,n,r,i,e,o){var s,h,u,y,a,p;return u=this.xx,y=this.xy,a=this.yx,p=this.yy,s=this.ox,h=this.oy,this.xx=t*u+r*y,this.xy=n*u+i*y,this.yx=t*a+r*p,this.yy=n*a+i*p,this.ox=t*s+r*h+e,this.oy=n*s+i*h+o,this},r.prototype.translate=function(t,n){return this._concat(1,0,0,1,t,n)},r.prototype.translatePoint=function(t){var n,r;return n=t.x,r=t.y,this.translate(n,r)},r.prototype.scale=function(t,n){return this._concat(t,0,0,n,0,0)},r.prototype.scalePoint=function(t){var n,r;return n=t.x,r=t.y,this.scale(n,r)},r.prototype.rotate=function(t){var n,r;return n=o(t),r=e(t),this._concat(n,r,-r,n,0,0)},r.prototype.skew=function(t,n){return this._concat(0,s(n),s(t),0,0,0)},r.prototype.invert=function(){var t,n,r,i,e,o,s;return i=this.xx,e=this.xy,o=this.yx,s=this.yy,n=this.ox,r=this.oy,t=i*s-e*o,this.xx=s/t,this.xy=-e/t,this.yx=-o/t,this.yy=i/t,this.ox=(o*r-s*n)/t,this.oy=(e*n-i*r)/t,this},r.prototype.transformPoint=function(t){var n,r;return n=t.x,r=t.y,new i(this.xx*n+this.yx*r+this.ox,this.xy*n+this.yy*r+this.oy)},r.prototype.deltaTransformPoint=function(t){var n,r;return n=t.x,r=t.y,new i(this.xx*n+this.yx*r,this.xy*n+this.yy*r)},r.prototype.createBox=function(t,n,r,i,s){var h,u;return r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),h=o(r),u=e(r),this._concat(t*h,n*u,-t*u,n*h,i,s)},r.prototype.createGradientBox=function(t,n,r,i,e){return r==null&&(r=0),i==null&&(i=0),e==null&&(e=0),this.createBox(t/1638.4,n/1638.4,r,i+t/2,e+n/2)},n.exports=r}),n("geom.Point",function(t,n){function r(t,n){this.x=t!=null?t:0,this.y=n!=null?n:0}var i=t("geom.Matrix"),e=Math.sin,o=Math.cos,s=Math.sqrt,h=Math.atan2;r.polar=function(t,n){return new r(t*o(n),t*e(n))},r.add=function(t,n){return new r(t.x+n.x,t.y+n.y)},r.subtract=function(t,n){return new r(t.x-n.x,t.y-n.y)},r.multiple=function(t,n){return new r(t.x*n,t.y*n)},r.divide=function(t,n){return new r(t.x/n,t.y/n)},r.crossProduct=function(t,n){return t.distance*n.distance*e(n.angle-t.angle)},r.dotProduct=function(){},r.distance=function(t,n){var r,i;return r=t.x-n.x,i=t.y-n.y,s(r*r+i*i)},r.between=function(t,n,i){return i==null&&(i=.5),new r(t.x+(n.x-t.x)*i,t.y+(n.y-t.y)*i)},r.prototype.distance=function(){return s(this.x*this.x+this.y*this.y)},r.prototype.angle=function(){return h(this.y,this.x)},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.multiple=function(t){return this.x*=t,this.y*=t,this},r.prototype.divide=function(t){return this.x/=t,this.y/=t,this},r.prototype.toString=function(){return"("+this.x+", "+this.y+")"},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.prototype.normalize=function(t){var n;return t==null&&(t=1),n=t/s(this.x*this.x+this.y*this.y),this.x*=n,this.y*=n,this},r.prototype.transform=function(t){var n;return n=new i(1,0,0,1,this.x,this.y),n.concat(t),this.x=n.ox,this.y=n.oy,this},n.exports=r}),n("geom.Rectangle",function(t,n){function r(t,n,r,i){this.x=t!=null?t:0,this.y=n!=null?n:0,this.width=r!=null?r:0,this.height=i!=null?i:0}var i=t("geom.Matrix"),e=Math.min,o=Math.max,s=Math.floor,h=Math.ceil,u=Math.sqrt;r.prototype.toString=function(){return"[Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r.prototype.left=function(){return e(this.x,this.x+this.width)},r.prototype.right=function(){return o(this.x,this.x+this.width)},r.prototype.top=function(){return e(this.y,this.y+this.height)},r.prototype.bottom=function(){return o(this.y,this.y+this.height)},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.apply=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.contains=function(t,n){return t>this.x&&this.x+this.width>t&&n>this.y&&this.y+this.height>n},r.prototype.containsPoint=function(t){return this.contains(t.x,t.y)},r.prototype.contain=function(t,n){return this.x>t?(this.width+=this.x-t,this.x=t):t>this.x+this.width&&(this.width=t-this.x),this.y>n?(this.height+=this.y-n,this.y=n):n>this.y+this.height&&(this.height=n-this.y),this},r.prototype.containPoint=function(t){return this.contain(t.x,t.y)},r.prototype.offset=function(t,n){return this.x+=t,this.y+=n,this},r.prototype.offsetPoint=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.inflate=function(t,n){return this.width+=t,this.height+=n,this},r.prototype.inflatePoint=function(t){return this.width+=t.x,this.height+=t.y,this},r.prototype.deflate=function(t,n){return this.width-=t,this.height-=n,this},r.prototype.deflatePoint=function(t){return this.width-=t.x,this.height-=t.y,this},r.prototype.union=function(t){var n,r,i,e,o,s,h,u,y,a;return o=t.x>this.x?this.x:t.x,h=this.x+this.width,u=t.x+t.width,s=h>u?h:u,a=s-o,y=t.y>this.y?this.y:t.y,r=this.y+this.height,i=t.y+t.height,n=r>i?r:i,e=n-y,this.x=o,this.y=y,this.width=0>a?0:a,this.height=0>e?0:e,this},r.prototype.isEmpty=function(){return this.x===0&&this.y===0&&this.width===0&&this.height===0},r.prototype.intersects=function(t){var n,r,i,s,h,u;return i=o(this.x,t.x),s=e(this.x+this.width,t.x+t.width),u=s-i,u>0?(h=o(this.y,t.y),n=e(this.y+this.height,t.y+t.height),r=n-h,r>0?!0:!1):!1},r.prototype.intersection=function(t){var n,i,s,h,u,y;return s=o(this.x,t.x),h=e(this.x+this.width,t.x+t.width),y=h-s,y>0?(u=o(this.y,t.y),n=e(this.y+this.height,t.y+t.height),i=n-u,i>0?new r(s,u,y,i):new r):new r},r.prototype.measureFarDistance=function(t,n){var r,i,e,s,h,y,a,p,l;return y=this.x,p=this.x+this.width,l=this.y,r=this.y+this.height,e=t-y,s=t-p,h=n-l,i=n-r,e*=e,s*=s,h*=h,i*=i,a=o(e+h,s+h,s+i,e+i),u(a)},r.prototype.adjustOuter=function(){var t,n;return t=s(this.x),n=s(this.y),t!==this.x&&this.width++,n!==this.y&&this.height++,this.x=t,this.y=n,this.width=h(this.width),this.height=h(this.height),this},r.prototype.transform=function(t){var n,r,s,h,u,y,a,p;return h=new i(1,0,0,1,this.x,this.y),a=new i(1,0,0,1,this.x+this.width,this.y),y=new i(1,0,0,1,this.x+this.width,this.y+this.height),s=new i(1,0,0,1,this.x,this.y+this.height),h.concat(t),a.concat(t),y.concat(t),s.concat(t),r=e(h.ox,a.ox,y.ox,s.ox),u=o(h.ox,a.ox,y.ox,s.ox),p=e(h.oy,a.oy,y.oy,s.oy),n=o(h.oy,a.oy,y.oy,s.oy),this.x=r,this.y=p,this.width=u-r,this.height=n-p,this},n.exports=r}),n("net.url",function(t,n,r){var i=t("muon.serializer.querystring");t("muon.utils.array");var e=/^((\w+:)(\/*)?(?:([^@]*)@)?(([^\/]+?)(?::(\d*))?))((\/[^\?#]*)?(\?([^#]*)?)?)?(#.*)?$/;r.parse=function(t,n){n==null&&(n=!1);var r,o,s,h,u=t.match(e),y=u[0],a=u[1],p=u[2],l=u[3],f=u[4],c=u[5],x=u[6],g=u[7],d=u[8],w=u[9],v=u[10],m=u[11],E=u[12];r={href:y,origin:a,protocol:p,host:c,hostname:x},n&&(m=i.parse(m)),o={auth:f,port:g,path:d,pathname:w,search:v,query:m,hash:E},l!=null&&(r.slashes=!0,d==null&&(r.path=r.pathname="/",r.href+="/"));for(s in o)h=o[s],h&&(r[s]=h);return r},r.format=function(t){var n=t.protocol,r=0>__indexOf.call(URL.CSS,n)?":":"://",e=(t.auth,t.host),o=t.hostname,s=t.port,h=t.pathname,u=t.search,y=t.query,a=t.hash;return e==null&&(e="",o!=null&&(e+=o),s!=null&&(e+=":"+s)),h.charAt(0)!=="/"&&(h="/"+h),u!=null?u.charAt(0)!=="?"&&(u="?"+u):y!=null&&(u="?"+i.stringify(y)),a!=null&&a.charAt(0)!=="#"&&(a="#"+a),n+r+e+h+u+a},r.resolve=function(){}}),n("serializer.querystring",function(t,n,r){var i=encodeURIComponent;r.stringify=function(t){var n,r=[];for(n in t)r.push(n+"="+i(t[n]));return r.join("&")},r.parse=function(t){if(t==null)return{};var n,r=t.split("&"),e={},o=0,s=r.length;if(s===0)throw new ErrorMessage;for(;s>o;o++)n=r[o].split("="),e[n[0]]=i(n[1]);return e}}),n("timers.Ticker",function(t,n){function r(){}t("muon.events.EventEmitter"),function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(){var t=0;return function(n){return setTimeout(n,66),t++}}()}(),n.exports=r}),n("utils.array",function(t,n,r){var i=Math.random,e=Array.prototype.shift,o=Array.prototype.slice,s=Object.prototype.toString;r.isArray=Array.isArray||function(t){return s.call(t)==="[object Array]"},r.indexOf=typeof Array.prototype.indexOf=="function"?function(){return Array.prototype.indexOf.apply(e.call(arguments),arguments)}:function(t,n,r){if(t==null)throw new TypeError("array.indexOf called on null or undefined");var i=t.length;if(i===0)return-1;var e;if(e=r==null?0:0>r?r+i:r,0>e)e=0;else if(e>i-1)return-1;for(;i>e;e++)if(t[e]===n)return e;return-1},r.lastIndexOf=typeof Array.prototype.lastIndexOf=="function"?function(){return Array.prototype.lastIndexOf.apply(e.call(arguments),arguments)}:function(t,n,r){if(t==null)throw new TypeError;var i=t.length;if(i===0)return-1;var e;if(e=r==null?i:0>r?i+r:r,0>e)return-1;for(e>i-1&&(e=i-1);e>=0;e--)if(t[e]===n)return e;return-1},r.include=function(t,n){return r.indexOf(t,n)!==-1},r.compact=function(t){var n=t.length,r=[];while(n--)t[n]!=null&&r.unshift(t[n]);return r},r.delete=function(t,n){var r=t.length,i=null;while(r--)t[r]===n&&(i=t.splice(r,1),i=i.length===1?i[0]:null);return i},r.deleteAt=function(t,n){var r=t.splice(n,1);return r.length===1?r[0]:null},r.random=function(t,n){if(t==null)throw new TypeError;if(n==null&&(n=1),t.length===0||0>=n)return null;if(n===1)return t[t.length*i()>>0];t=o.call(t);var r=[];while(n--&&t.length)r.push(t.splice(t.length*i()>>0,1)[0]);return r},r.shuffle=function(t){if(t==null)throw new TypeError;t=o.call(t);var n,r,e=t.length;while(e)n=i()*e>>0,r=t[--e],t[e]=t[n],t[n]=r;return t},r.filter=typeof Array.prototype.filter=="function"?function(){return Array.prototype.filter.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s,h;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(h=[],i=o=0,s=t.length;s>o;i=++o)e=t[i],i in t&&n.call(r,e,i,t)&&h.push(e);return h},r.forEach=typeof Array.prototype.forEach=="function"?function(){Array.prototype.forEach.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(i=o=0,s=t.length;s>o;i=++o)e=t[i],i in t&&n.call(r,e,i,t)},r.every=typeof Array.prototype.every=="function"?function(){return Array.prototype.every.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(i=o=0,s=t.length;s>o;i=++o)if(e=t[i],i in t&&!n.call(r,e,i,t))return!1;return!0},r.map=typeof Array.prototype.map=="function"?function(){return Array.prototype.map.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s,h;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(h=[],i=o=0,s=t.length;s>o;i=++o)e=t[i],i in t&&h.push(n.call(r,e,i,t));return h},r.some=typeof Array.prototype.some=="function"?function(){return Array.prototype.some.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),typeof n!="function")throw new TypeError;for(i=o=0,s=t.length;s>o;i=++o)if(e=t[i],i(fo(t&&n.call(r,e,i,t))))return!0;return!1},r.reduce=typeof Array.prototype.reduce=="function"?function(){return Array.prototype.reduce.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s,h;if(r==null&&(r=null),e=t.length,typeof n!="function"||e===0&&r===null)throw new TypeError;if(i=0,r===null)for(;;){if(i in t){r=t[i++];break}if(++i>e)throw new TypeError}for(o=s=i,h=e-1;s>=h;o=s+=-1)o in t&&(r=n.call(null,r,t[o],o,t));return r},r.reduceRight=typeof Array.prototype.reduceRight=="function"?function(){return Array.prototype.reduceRight.apply(e.call(arguments),arguments)}:function(t,n,r){var i,e,o,s;if(r==null&&(r=null),e=t.length,typeof n!="function"||e===0&&r===null)throw new TypeError;if(i=e-1,r===null)for(;;){if(i in t){r=t[i--];break}if(e>=--i)throw new TypeError}for(o=s=i;s>=0;o=s+=-1)o in t&&(r=n.call(null,r,t[o],o,t));return r},r.toArray=function(t){return o.call(t)},r.unique=function(t){var n;n={};for(var r,i=0;t.length>i;++i)r=t[i],r in n&&t.splice(i--,1),n[r]=!0;return t},r.rotate=function(t,n){if(n==null&&(n=1),n>0)while(n--)t.push(t.shift());else if(0>n){n*=-1;while(n--)t.unshift(t.pop())}return t},r.transpose=function(t){var n,r,i,e,o,s,h,u,y,a,p;for(s=[],r=-1,e=u=0,a=t.length;a>u;e=++u){if(h=t[e],!ArrayUtil.isArray(h))throw new TypeError("Element isn't Array.");if(n=h.length,e!==0&&n!==r)throw Error("Element size differ ("+n+" should be "+r+")");if(r=n,e===0)while(n--)s[n]=[];for(o=y=0,p=h.length;p>y;o=++y)i=h[o],s[o].push(i)}return s}}),this.require=t.require}).call(this)